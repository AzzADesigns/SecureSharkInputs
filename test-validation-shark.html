<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test ValidationShark</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/securesharkinputs@1.2.2/dist/index.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .test-section {
            background: white;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .input-field {
            margin: 15px 0;
        }
        input, textarea, select {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            margin-bottom: 5px;
        }
        button {
            background: #007bff;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background: #0056b3;
        }
        button:disabled {
            background: #ccc;
            cursor: not-allowed;
        }
        .error {
            color: red;
            font-size: 12px;
        }
        .success {
            color: green;
            font-size: 12px;
        }
        .log {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            padding: 10px;
            margin: 10px 0;
            border-radius: 4px;
            font-family: monospace;
            font-size: 12px;
            max-height: 200px;
            overflow-y: auto;
        }
    </style>
</head>
<body>
    <h1>üß™ Test ValidationShark</h1>
    
    <div id="root"></div>

    <script type="text/babel">
        const { ValidationShark } = window.SecureSharkInputs;
        
        function TestApp() {
            const [logs, setLogs] = React.useState([]);
            const [formBlocked, setFormBlocked] = React.useState(false);
            
            const addLog = (message) => {
                setLogs(prev => [...prev, `${new Date().toLocaleTimeString()}: ${message}`]);
            };
            
            const clearLogs = () => setLogs([]);
            
            const handleSubmit = (e) => {
                e.preventDefault();
                addLog('‚úÖ Formulario enviado correctamente!');
            };
            
            const handleFormBlocked = () => {
                setFormBlocked(true);
                addLog('üö® FORMULARIO BLOQUEADO - Contenido malicioso detectado');
            };
            
            const handleFormUnblocked = () => {
                setFormBlocked(false);
                addLog('‚úÖ FORMULARIO DESBLOQUEADO - Contenido v√°lido');
            };
            
            return (
                <div>
                    <div className="test-section">
                        <h2>üéØ Test 1: Uso Correcto (Autom√°tico)</h2>
                        <p>ValidationShark deber√≠a detectar autom√°ticamente el input y bloquear el formulario si detecta amenazas.</p>
                        
                        <form onSubmit={handleSubmit} id="test-form-1">
                            <div className="input-field">
                                <label>Nombre (Normal):</label>
                                <input type="text" placeholder="Escribe tu nombre" />
                                <ValidationShark />
                            </div>
                            
                            <div className="input-field">
                                <label>XSS Test:</label>
                                <input type="text" placeholder="Prueba: &lt;script&gt;alert('xss')&lt;/script&gt;" />
                                <ValidationShark />
                            </div>
                            
                            <div className="input-field">
                                <label>SQL Injection Test:</label>
                                <input type="text" placeholder="Prueba: '; DROP TABLE users; --" />
                                <ValidationShark />
                            </div>
                            
                            <button type="submit" disabled={formBlocked}>
                                {formBlocked ? 'üö´ Env√≠o Bloqueado' : 'Enviar'}
                            </button>
                        </form>
                    </div>
                    
                    <div className="test-section">
                        <h2>üîß Test 2: Uso con Callbacks (Como el usuario)</h2>
                        <p>ValidationShark con inputId y callbacks personalizados.</p>
                        
                        <form onSubmit={handleSubmit} id="test-form-2">
                            <div className="input-field">
                                <label>Email:</label>
                                <input id="email" type="email" placeholder="tu@email.com" />
                                <ValidationShark 
                                    inputId="email"
                                    onValid={() => addLog('‚úÖ Email v√°lido')}
                                    onInvalid={() => addLog('‚ùå Email inv√°lido')}
                                />
                            </div>
                            
                            <div className="input-field">
                                <label>Comentario:</label>
                                <textarea id="comment" placeholder="Escribe un comentario"></textarea>
                                <ValidationShark 
                                    inputId="comment"
                                    onValid={() => addLog('‚úÖ Comentario v√°lido')}
                                    onInvalid={() => addLog('‚ùå Comentario inv√°lido')}
                                />
                            </div>
                            
                            <button type="submit">Enviar</button>
                        </form>
                    </div>
                    
                    <div className="test-section">
                        <h2>üß™ Test 3: Casos de Prueba</h2>
                        <p>Prueba estos valores para verificar la detecci√≥n:</p>
                        
                        <div className="input-field">
                            <label>Test XSS:</label>
                            <input type="text" placeholder="&lt;script&gt;alert('xss')&lt;/script&gt;" />
                            <ValidationShark />
                        </div>
                        
                        <div className="input-field">
                            <label>Test SQL Injection:</label>
                            <input type="text" placeholder="'; DROP TABLE users; --" />
                            <ValidationShark />
                        </div>
                        
                        <div className="input-field">
                            <label>Test Data Theft:</label>
                            <input type="text" placeholder="document.cookie" />
                            <ValidationShark />
                        </div>
                        
                        <div className="input-field">
                            <label>Test Normal:</label>
                            <input type="text" placeholder="Hola mundo" />
                            <ValidationShark />
                        </div>
                    </div>
                    
                    <div className="test-section">
                        <h2>üìä Logs de Actividad</h2>
                        <button onClick={clearLogs}>Limpiar Logs</button>
                        <div className="log">
                            {logs.map((log, index) => (
                                <div key={index}>{log}</div>
                            ))}
                        </div>
                    </div>
                    
                    <div className="test-section">
                        <h2>üìã Instrucciones de Prueba</h2>
                        <ol>
                            <li><strong>Test Normal:</strong> Escribe "Hola mundo" ‚Üí Deber√≠a mostrar ‚úÖ V√°lido</li>
                            <li><strong>Test XSS:</strong> Escribe "&lt;script&gt;alert('xss')&lt;/script&gt;" ‚Üí Deber√≠a mostrar ‚ùå Contenido no permitido</li>
                            <li><strong>Test SQL:</strong> Escribe "'; DROP TABLE users; --" ‚Üí Deber√≠a bloquear el formulario</li>
                            <li><strong>Test Data Theft:</strong> Escribe "document.cookie" ‚Üí Deber√≠a detectar amenaza</li>
                        </ol>
                    </div>
                </div>
            );
        }
        
        ReactDOM.render(<TestApp />, document.getElementById('root'));
    </script>
</body>
</html> 